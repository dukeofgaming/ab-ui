name: 'changesets-is-release-merge'
description: 'Detect if the current commit is a changeset-release merge commit.'
runs:
  using: 'composite'
  steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
        
    - name: Detect changeset-release ancestor
      id: check_changeset_release
      shell: bash
      run: |
        SCRIPT="${GITHUB_ACTION_PATH:-.}/detect-changeset-release.sh"
        
        chmod +x "$SCRIPT"
        bash "$SCRIPT"

outputs:
  changesets-is-release-merge:
    description: 'True if this is a changeset-release merge commit.'
    value: ${{ steps.check_changeset_release.outputs.changesets-is-release-merge }}
